<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Billability Dashboard - Home page</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" th:href="@{webjars/bootstrap/4.3.1/css/bootstrap.min.css}"/>
    <!-- Our Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <link rel="stylesheet" th:href="@{webjars/font-awesome/4.7.0/css/font-awesome.min.css}" />
</head>

<body>
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>Billability Dashboard</h3>
            </div>

            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#">Dashboard</a>
                </li>
		 <li>
                    <a th:href="@{/projects-list}">Projects List</a>
                </li>
		<li>
                    <a th:href="@{/import-base-data}">Import Base Data</a>
                </li>
                <li>
                    <a href="#">Trends</a>
                </li>
		<li>
                    <a href="#">Unbilled Details</a>
                </li>
		<li>
                    <a href="#">Unbilled Summary</a>
                </li>
                <li>
                    <a href="#">Entry Exit Tracker</a>
                </li>
		<li>
                    <a th:href="@{/users-list}">Users</a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
	            <button type="button" id="sidebarCollapse" class="btn btn-info">
			<i class="fa fa-bars" style="font-size:24px"></i>
		    </button>
		    
		    <!--<button type="button" id="sidebarCollapse" class="btn btn-info">         
			<i class="fa fa-bars" style="font-size:24px"></i>
                        <span>Toggle Sidebar</span>
                    </button>-->
                    
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item active">
                            	<span th:inline="text">Hello [[${#httpServletRequest.remoteUser}]]!&nbsp;&nbsp;</span>
                                <!-- <a class="nav-link" href="#">My Profile</a> -->
                            </li>			    
			    			<li class="nav-item active">
                                	<!-- <a class="nav-link" href="#">Sign out</a> -->
                                	<form th:action="@{/logout}" method="post">
            							<input type="submit" value="Sign Out"/>
        							</form>
                            </li>		
                        </ul>
                    </div>
                </div>
            </nav>

            <h2>Summary</h2>
            <p>&nbsp;</p>
            <form method="POST" th:action="@{/home}">
			    <label for="dashboard_date">Enter a Date:</label>
			
			    <input type="date" id="dashboard_date" name="dashboard_date" th:value="${pickedDate} ? ${pickedDate} : ${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" />
			    <input type="submit" id="btnSubmit" name="btnSubmit" 
			            value="Generate Dashboard" />
			</form>
			<hr/>
			<div th:if="${pickedDateText}">
			    <span class="text-info" th:text="${pickedDateText}"></span>
			</div>
			<div class="row" th:if="${dashboardMap}">
				<table class="table table-bordered">
					<thead>
					  <tr class="table-info">
						<th>Summary</th>
						<th>Total Offshore</th>
						<th>Total Onsite</th>
						<th>Total Allocated</th>
						<th>Unbilled Offshore</th>
						<th>Unbilled Onsite</th>
						<th>Do NOT BILL</th>
						<th>Total Unbilled</th>
						<th>Billed Offshore</th>
						<th>Billed Onsite</th>
						<th>Total billed</th>
						<th>% Utilization</th>
					  </tr>
					</thead>
					<tbody>
					  <tr>
						<td>
							Delivery with PO
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0">
							<span th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span th:text="(${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0 "></span></td>
						<td><span th:text="(${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Delivery_1_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_1_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Delivery_1_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_1_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span th:text="(${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0"></span></td>
						<td><span th:text="(${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0">
							<span th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr>
						<td>
							Delivery without PO
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0">
							<span th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span th:text="(${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0 "></span></td>
						<td><span th:text="(${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Delivery_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Delivery_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span th:text="(${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0"></span></td>
						<td><span th:text="(${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0">
							<span th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr class="font-weight-bold">
						<td>
							Delivery Total
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,billedOffshore1 = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,unbilledOffshore1 = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0">
							<span class="dt_offshore" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOffshore1} + ${unbilledOffshore1}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0,billedOnsite1 = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0,unbilledOnsite1 = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span class="dt_onsite" th:text="${billedOnsite} + ${unbilledOnsite} + ${billedOnsite1} + ${unbilledOnsite1}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span class="dt_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="a = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,b = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0">
							<span class="dt_unbilled_offshore" th:text="${a} + ${b}"></span>
						</td>
						<td th:with="a = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0,b = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0 ">
							<span class="dt_unbilled_onsite" th:text="${a} + ${b}"></span>
						</td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Delivery_1_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_1_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Delivery_1_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_1_OFFSHORE_N_Designated- Non Billable(DNB)')}:0,dnbOnsite1 = (${dashboardMap.get('Delivery_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore1 = (${dashboardMap.get('Delivery_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Delivery_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="dt_dnb" th:text="${dnbOnsite} + ${dnbOffshore} + ${dnbOnsite1} + ${dnbOffshore1}"></span>
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0,unbilledOffshore1 = (${dashboardMap.get('Delivery_0_N_OFFSHORE')})?${dashboardMap.get('Delivery_0_N_OFFSHORE')}:0,unbilledOnsite1 = (${dashboardMap.get('Delivery_0_N_ONSITE')})?${dashboardMap.get('Delivery_0_N_ONSITE')}:0">
							<span class="dt_total_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite} + ${unbilledOffshore1} + ${unbilledOnsite1} "></span>
						</td>
						<td	th:with="a = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,b = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0">
							<span class="dt_billed_offshore" th:text="${a} + ${b}"></span>
						</td>
						<td th:with="a = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,b = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0">
							<span class="dt_billed_onsite" th:text="${a} + ${b}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,billedOffshore1 = (${dashboardMap.get('Delivery_0_Y_OFFSHORE')})?${dashboardMap.get('Delivery_0_Y_OFFSHORE')}:0,billedOnsite1 = (${dashboardMap.get('Delivery_0_Y_ONSITE')})?${dashboardMap.get('Delivery_0_Y_ONSITE')}:0">
							<span class="dt_billed_total" th:text="${billedOffshore} + ${billedOnsite} + ${billedOffshore1} + ${billedOnsite1}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Delivery_1_Y_OFFSHORE')})?${dashboardMap.get('Delivery_1_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Delivery_1_N_OFFSHORE')})?${dashboardMap.get('Delivery_1_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Delivery_1_Y_ONSITE')})?${dashboardMap.get('Delivery_1_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Delivery_1_N_ONSITE')})?${dashboardMap.get('Delivery_1_N_ONSITE')}:0">
							<span class="dt_percentage" th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="dt_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  		  
					  <tr>
						<td>
							Ingram Investment
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')}:0">
							<span class="sub_delivery_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Ingram Investment_0_Y_ONSITE')})?${dashboardMap.get('Ingram Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Ingram Investment_0_N_ONSITE')})?${dashboardMap.get('Ingram Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Ingram Investment_0_Y_ONSITE')})?${dashboardMap.get('Ingram Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Ingram Investment_0_N_ONSITE')})?${dashboardMap.get('Ingram Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_unbilled_offshore" th:text="(${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="sub_delivery_unbilled_onsite" th:text="(${dashboardMap.get('Ingram Investment_0_N_ONSITE')})?${dashboardMap.get('Ingram Investment_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Ingram Investment_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Ingram Investment_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Ingram Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Ingram Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="sub_delivery_offshore_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Ingram Investment_0_N_ONSITE')})?${dashboardMap.get('Ingram Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_billed_offshore" th:text="(${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="sub_delivery_billed_onsite" th:text="(${dashboardMap.get('Ingram Investment_0_Y_ONSITE')})?${dashboardMap.get('Ingram Investment_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Ingram Investment_0_Y_ONSITE')})?${dashboardMap.get('Ingram Investment_0_Y_ONSITE')}:0">
							<span class="sub_delivery_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')})?${dashboardMap.get('Ingram Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Ingram Investment_0_Y_ONSITE')})?${dashboardMap.get('Ingram Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Ingram Investment_0_N_ONSITE')})?${dashboardMap.get('Ingram Investment_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="sub_delivery_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="sub_delivery_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								0
							</span>
							%
						</td>
					</tr>
					  
					 <tr>
						<td>
							Disney Automation Investment
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')}:0">
							<span class="sub_delivery_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_unbilled_offshore" th:text="(${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="sub_delivery_unbilled_onsite" th:text="(${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Disney Automation Investment_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Disney Automation Investment_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Disney Automation Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Disney Automation Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="sub_delivery_offshore_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_billed_offshore" th:text="(${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="sub_delivery_billed_onsite" th:text="(${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')}:0">
							<span class="sub_delivery_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')})?${dashboardMap.get('Disney Automation Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')})?${dashboardMap.get('Disney Automation Investment_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="sub_delivery_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="sub_delivery_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					 <tr>
						<td>
							Other Investment
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Investment_0_N_OFFSHORE')})?${dashboardMap.get('Investment_0_N_OFFSHORE')}:0">
							<span class="sub_delivery_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Investment_0_Y_ONSITE')})?${dashboardMap.get('Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Investment_0_N_ONSITE')})?${dashboardMap.get('Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Investment_0_N_OFFSHORE')})?${dashboardMap.get('Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Investment_0_Y_ONSITE')})?${dashboardMap.get('Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Investment_0_N_ONSITE')})?${dashboardMap.get('Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_unbilled_offshore" th:text="(${dashboardMap.get('Investment_0_N_OFFSHORE')})?${dashboardMap.get('Investment_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="sub_delivery_unbilled_onsite" th:text="(${dashboardMap.get('Investment_0_N_ONSITE')})?${dashboardMap.get('Investment_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Investment_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Investment_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Investment_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="sub_delivery_offshore_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Investment_0_N_OFFSHORE')})?${dashboardMap.get('Investment_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Investment_0_N_ONSITE')})?${dashboardMap.get('Investment_0_N_ONSITE')}:0">
							<span class="sub_delivery_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_billed_offshore" th:text="(${dashboardMap.get('Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Investment_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="sub_delivery_billed_onsite" th:text="(${dashboardMap.get('Investment_0_Y_ONSITE')})?${dashboardMap.get('Investment_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Investment_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Investment_0_Y_ONSITE')})?${dashboardMap.get('Investment_0_Y_ONSITE')}:0">
							<span class="sub_delivery_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Investment_0_Y_OFFSHORE')})?${dashboardMap.get('Investment_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Investment_0_N_OFFSHORE')})?${dashboardMap.get('Investment_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Investment_0_Y_ONSITE')})?${dashboardMap.get('Investment_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Investment_0_N_ONSITE')})?${dashboardMap.get('Investment_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="sub_delivery_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="sub_delivery_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr>
						<td>
							Pipeline Project
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Pipeline_0_Y_OFFSHORE')})?${dashboardMap.get('Pipeline_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Pipeline_0_N_OFFSHORE')})?${dashboardMap.get('Pipeline_0_N_OFFSHORE')}:0">
							<span class="sub_delivery_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Pipeline_0_Y_ONSITE')})?${dashboardMap.get('Pipeline_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Pipeline_0_N_ONSITE')})?${dashboardMap.get('Pipeline_0_N_ONSITE')}:0">
							<span class="sub_delivery_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Pipeline_0_Y_OFFSHORE')})?${dashboardMap.get('Pipeline_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Pipeline_0_N_OFFSHORE')})?${dashboardMap.get('Pipeline_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Pipeline_0_Y_ONSITE')})?${dashboardMap.get('Pipeline_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Pipeline_0_N_ONSITE')})?${dashboardMap.get('Pipeline_0_N_ONSITE')}:0">
							<span class="sub_delivery_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_unbilled_offshore" th:text="(${dashboardMap.get('Pipeline_0_N_OFFSHORE')})?${dashboardMap.get('Pipeline_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="sub_delivery_unbilled_onsite" th:text="(${dashboardMap.get('Pipeline_0_N_ONSITE')})?${dashboardMap.get('Pipeline_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Pipeline_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Pipeline_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Pipeline_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Pipeline_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="sub_delivery_offshore_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Pipeline_0_N_OFFSHORE')})?${dashboardMap.get('Pipeline_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Pipeline_0_N_ONSITE')})?${dashboardMap.get('Pipeline_0_N_ONSITE')}:0">
							<span class="sub_delivery_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_billed_offshore" th:text="(${dashboardMap.get('Pipeline_0_Y_OFFSHORE')})?${dashboardMap.get('Pipeline_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="sub_delivery_billed_onsite" th:text="(${dashboardMap.get('Pipeline_0_Y_ONSITE')})?${dashboardMap.get('Pipeline_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Pipeline_0_Y_OFFSHORE')})?${dashboardMap.get('Pipeline_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Pipeline_0_Y_ONSITE')})?${dashboardMap.get('Pipeline_0_Y_ONSITE')}:0">
							<span class="sub_delivery_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Pipeline_0_Y_OFFSHORE')})?${dashboardMap.get('Pipeline_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Pipeline_0_N_OFFSHORE')})?${dashboardMap.get('Pipeline_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Pipeline_0_Y_ONSITE')})?${dashboardMap.get('Pipeline_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Pipeline_0_N_ONSITE')})?${dashboardMap.get('Pipeline_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="sub_delivery_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="sub_delivery_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr>
						<td>
							Management Project
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Management_0_Y_OFFSHORE')})?${dashboardMap.get('Management_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Management_0_N_OFFSHORE')})?${dashboardMap.get('Management_0_N_OFFSHORE')}:0">
							<span class="sub_delivery_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Management_0_Y_ONSITE')})?${dashboardMap.get('Management_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Management_0_N_ONSITE')})?${dashboardMap.get('Management_0_N_ONSITE')}:0">
							<span class="sub_delivery_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Management_0_Y_OFFSHORE')})?${dashboardMap.get('Management_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Management_0_N_OFFSHORE')})?${dashboardMap.get('Management_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Management_0_Y_ONSITE')})?${dashboardMap.get('Management_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Management_0_N_ONSITE')})?${dashboardMap.get('Management_0_N_ONSITE')}:0">
							<span class="sub_delivery_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_unbilled_offshore" th:text="(${dashboardMap.get('Management_0_N_OFFSHORE')})?${dashboardMap.get('Management_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="sub_delivery_unbilled_onsite" th:text="(${dashboardMap.get('Management_0_N_ONSITE')})?${dashboardMap.get('Management_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Management_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Management_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Management_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Management_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="sub_delivery_offshore_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Management_0_N_OFFSHORE')})?${dashboardMap.get('Management_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Management_0_N_ONSITE')})?${dashboardMap.get('Management_0_N_ONSITE')}:0">
							<span class="sub_delivery_unbilled" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="sub_delivery_billed_offshore" th:text="(${dashboardMap.get('Management_0_Y_OFFSHORE')})?${dashboardMap.get('Management_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="sub_delivery_billed_onsite" th:text="(${dashboardMap.get('Management_0_Y_ONSITE')})?${dashboardMap.get('Management_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Management_0_Y_OFFSHORE')})?${dashboardMap.get('Management_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Management_0_Y_ONSITE')})?${dashboardMap.get('Management_0_Y_ONSITE')}:0">
							<span class="sub_delivery_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Management_0_Y_OFFSHORE')})?${dashboardMap.get('Management_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Management_0_N_OFFSHORE')})?${dashboardMap.get('Management_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Management_0_Y_ONSITE')})?${dashboardMap.get('Management_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Management_0_N_ONSITE')})?${dashboardMap.get('Management_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="sub_delivery_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="sub_delivery_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr>
						<td class="font-weight-bold">
							Non Delivery Sub Total
						</td>
		 				<td><span id="target_sub_delivery_offshore"></span> </td>
						<td><span id="target_sub_delivery_onsite"></span> </td>
						<td><span id="target_sub_delivery_allocated"></span> </td>
						<td><span id="target_sub_delivery_unbilled_offshore"></span> </td>
						<td><span id="target_sub_delivery_unbilled_onsite"></td>
						<td><span id="target_sub_delivery_offshore_dnb"></span></td>
						<td><span id="target_sub_delivery_unbilled"></span></td>
						<td><span id="target_sub_delivery_billed_offshore"></span></td>
						<td><span id="target_sub_delivery_billed_onsite"></span></td>
						<td><span id="target_sub_delivery_billed_total"></span></td>
						<td><span id="target_sub_delivery_percentage"></span>%</td>
					  </tr>
					  
					 <tr>
						<td>
							Buffer
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Buffer_0_Y_OFFSHORE')})?${dashboardMap.get('Buffer_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Buffer_0_N_OFFSHORE')})?${dashboardMap.get('Buffer_0_N_OFFSHORE')}:0">
							<span class="buffer_offshore_total" th:text="${billedOffshore} + ${unbilledOffshore}"></span>
						</td>
						<td th:with="billedOnsite = (${dashboardMap.get('Buffer_0_Y_ONSITE')})?${dashboardMap.get('Buffer_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Buffer_0_N_ONSITE')})?${dashboardMap.get('Buffer_0_N_ONSITE')}:0">
							<span class="buffer_onsite_total" th:text="${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td th:with="billedOffshore = (${dashboardMap.get('Buffer_0_Y_OFFSHORE')})?${dashboardMap.get('Buffer_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Buffer_0_N_OFFSHORE')})?${dashboardMap.get('Buffer_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Buffer_0_Y_ONSITE')})?${dashboardMap.get('Buffer_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Buffer_0_N_ONSITE')})?${dashboardMap.get('Buffer_0_N_ONSITE')}:0">
							<span class="buffer_allocated" th:text="${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="buffer_unbilled_offshore" th:text="(${dashboardMap.get('Buffer_0_N_OFFSHORE')})?${dashboardMap.get('Buffer_0_N_OFFSHORE')}:0 "></span></td>
						<td><span class="buffer_unbilled_onsite" th:text="(${dashboardMap.get('Buffer_0_N_ONSITE')})?${dashboardMap.get('Buffer_0_N_ONSITE')}:0 "></span></td>
						<td th:with="dnbOnsite = (${dashboardMap.get('Buffer_0_ONSITE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Buffer_0_ONSITE_N_Designated- Non Billable(DNB)')}:0,dnbOffshore = (${dashboardMap.get('Buffer_0_OFFSHORE_N_Designated- Non Billable(DNB)')})?${dashboardMap.get('Buffer_0_OFFSHORE_N_Designated- Non Billable(DNB)')}:0">
							<span class="buffer_dnb" th:text="${dnbOnsite} + ${dnbOffshore}"></span>		
						</td>
						<td th:with="unbilledOffshore = (${dashboardMap.get('Buffer_0_N_OFFSHORE')})?${dashboardMap.get('Buffer_0_N_OFFSHORE')}:0,unbilledOnsite = (${dashboardMap.get('Buffer_0_N_ONSITE')})?${dashboardMap.get('Buffer_0_N_ONSITE')}:0">
							<span class="buffer_unbilled_total" th:text="${unbilledOffshore} + ${unbilledOnsite}"></span>
						</td>
						<td><span class="buffer_billed_offshore" th:text="(${dashboardMap.get('Buffer_0_Y_OFFSHORE')})?${dashboardMap.get('Buffer_0_Y_OFFSHORE')}:0"></span></td>
						<td><span class="buffer_billed_onsite" th:text="(${dashboardMap.get('Buffer_0_Y_ONSITE')})?${dashboardMap.get('Buffer_0_Y_ONSITE')}:0"></span></td>
						<td th:with="billedOffshore = (${dashboardMap.get('Buffer_0_Y_OFFSHORE')})?${dashboardMap.get('Buffer_0_Y_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Buffer_0_Y_ONSITE')})?${dashboardMap.get('Buffer_0_Y_ONSITE')}:0">
							<span class="buffer_billed_total" th:text="${billedOffshore} + ${billedOnsite}"></span>
						</td>
						<!-- <td>%%</td> -->
						<td th:with="billedOffshore = (${dashboardMap.get('Buffer_0_Y_OFFSHORE')})?${dashboardMap.get('Buffer_0_Y_OFFSHORE')}:0,unbilledOffshore = (${dashboardMap.get('Buffer_0_N_OFFSHORE')})?${dashboardMap.get('Buffer_0_N_OFFSHORE')}:0,billedOnsite = (${dashboardMap.get('Buffer_0_Y_ONSITE')})?${dashboardMap.get('Buffer_0_Y_ONSITE')}:0,unbilledOnsite = (${dashboardMap.get('Buffer_0_N_ONSITE')})?${dashboardMap.get('Buffer_0_N_ONSITE')}:0">
							<span th:if="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
								<span class="buffer_percentage" th:with="utilization = (${billedOffshore} + ${billedOnsite})/ (${billedOffshore} + ${unbilledOffshore} + ${billedOnsite} + ${unbilledOnsite}) * 100" th:text="${#numbers.formatDecimal(utilization, 0, 2)}"></span>
							</span>
							<span class="buffer_percentage" th:unless="${ billedOffshore + billedOnsite &gt; 0 and billedOffshore + unbilledOffshore + billedOnsite + unbilledOnsite &gt; 0}">
        						0
    						</span>
							%
						</td>
					  </tr>
					  
					  <tr class="font-weight-bold">
						<td>
							Grand Total
						</td>
						<td><span id="total_offshore_count"></span></td>
						<td><span id="total_onsite_count"></span></td>
						<td><span id="total_allocated"></span></td>
						<td><span id="total_ubilled_offshore"></span></td>
						<td><span id="total_ubilled_onsite"></span></td>
						<td><span id="total_dnb"></span></td>
						<td><span id="total_unbilled"></span></td>
						<td><span id="total_billed_offshore"></span></td>
						<td><span id="total_billed_onsite"></span></td>
						<td><span id="total_billed"></span></td>
						<td><span id="total_percentage"></span>%</td>
					  </tr>
					  					 
					</tbody>
				</table>
			</div>
            </div>
    </div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script type="text/javascript" th:src="@{webjars/jquery/3.4.1/jquery.min.js}"></script>	
    <!-- Popper.JS -->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>-->
    <!-- Bootstrap JS -->
	<script type="text/javascript" th:src="@{webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
	
    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
            //Sub delivery totals
            var sum = 0;
            $('.sub_delivery_offshore_total').each(function(){
                sum += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_offshore").text(sum);
            
            var sum1 = 0;
            $('.sub_delivery_onsite_total').each(function(){
                sum1 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_onsite").text(sum1);
            
            var sum2 = 0;
            $('.sub_delivery_allocated').each(function(){
                sum2 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_allocated").text(sum2);
            
            var sum3 = 0;
            $('.sub_delivery_unbilled_offshore').each(function(){
                sum3 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_unbilled_offshore").text(sum3);
            
            var sum4 = 0;
            $('.sub_delivery_unbilled_onsite').each(function(){
                sum4 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_unbilled_onsite").text(sum4);
            
            var sum5 = 0;
            $('.sub_delivery_offshore_dnb').each(function(){
                sum5 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_offshore_dnb").text(sum5);
            
            var sum6 = 0;
            $('.sub_delivery_unbilled').each(function(){
                sum6 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_unbilled").text(sum6);
            
            var sum7 = 0;
            $('.sub_delivery_billed_offshore').each(function(){
                sum7 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_billed_offshore").text(sum7);

            var sum8 = 0;
            $('.sub_delivery_billed_onsite').each(function(){
                sum8 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_billed_onsite").text(sum8);
			
            var sum9 = 0;
            $('.sub_delivery_billed_total').each(function(){
                sum9 += parseInt($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_billed_total").text(sum9);
            
            var sum10 = 0;
            $('.sub_delivery_percentage').each(function(){
                sum10 += parseFloat($(this).text());  // Or this.innerHTML, this.innerText
            });
            $("#target_sub_delivery_percentage").text(sum10);
            
            // Grand totals
            $("#total_offshore_count").text(parseInt($(".dt_offshore").text()) + sum + parseInt($(".buffer_offshore_total").text()));
            $("#total_onsite_count").text(parseInt($(".dt_onsite").text()) + sum1 + parseInt($(".buffer_onsite_total").text()));
            $("#total_allocated").text(parseInt($(".dt_allocated").text()) + sum2 + parseInt($(".buffer_allocated").text()));
            $("#total_ubilled_offshore").text(parseInt($(".dt_unbilled_offshore").text()) + sum3 + parseInt($(".buffer_unbilled_offshore").text()));
            $("#total_ubilled_onsite").text(parseInt($(".dt_unbilled_onsite").text()) + sum4 + parseInt($(".buffer_unbilled_onsite").text()));
            $("#total_dnb").text(parseInt($(".dt_dnb").text()) + sum5 + parseInt($(".buffer_dnb").text()));
            $("#total_unbilled").text(parseInt($(".dt_total_unbilled").text()) + sum6 + parseInt($(".buffer_unbilled_total").text()));
            $("#total_billed_offshore").text(parseInt($(".dt_billed_offshore").text()) + sum7 + parseInt($(".buffer_billed_offshore").text()));
            $("#total_billed_onsite").text(parseInt($(".dt_billed_onsite").text()) + sum8 + parseInt($(".buffer_billed_onsite").text()));
            $("#total_billed").text(parseInt($(".dt_billed_total").text()) + sum9 + parseInt($(".buffer_billed_total").text()));
            var final_per = (parseInt($(".dt_billed_total").text()) + sum9 + parseInt($(".buffer_billed_total").text())) / (parseInt($(".dt_allocated").text()) + sum2 + parseInt($(".buffer_allocated").text()));
            final_per = (final_per * 100).toFixed(2);
            $("#total_percentage").text(final_per);
            //alert(final_per);
        });
    </script>
</body>

</html>